{
  "apps": [{
    "name": "koa-base",
    "script": "bin/server.js",
    "instances" : "max",
    "exec_mode" : "cluster",
    "error_file": "./log/server.error.log",
    "out_file": "./log/server.access.log",
    "merge_logs": true,
    "log_date_format": "YYYY-MM-DD HH:mm:ss"
  }],
  "deploy": {
    "pro": {
      "user": "work",
      "host": ["10.10.124.34", "10.10.144.133"],
      "ref": "origin/master",
      "repo": "git@github.com/yunlaiwu/koa-base.git",
      "ssh_options": ["StrictHostKeyChecking=no", "PasswordAuthentication=no"],
      "path": "/home/work/koa_base",
      "pre-deploy": "git pull origin master",
      "post-deploy": "npm install --production && pm2 startOrRestart process.json --env production"
    },
    "pro-pc": {
      "user": "work",
      "host": ["10.10.124.34", "10.10.144.133"],
      "ref": "origin/master",
      "repo": "git@github.com/yunlaiwu/koa-pc.git",
      "ssh_options": ["StrictHostKeyChecking=no", "PasswordAuthentication=no"],
      "path": "/home/work/koa_pc/",
      "pre-deploy": "git pull origin master",
      "post-deploy": "cd ../../koa_base/source && sh deploy.sh pc && pm2 startOrRestart process.json --env production"
    },
    "dev": {
      "user": "work",
      "host": ["10.10.85.164"],
      "ref": "origin/master",
      "repo": "git@github.com/yunlaiwu/koa-base.git",
      "ssh_options": ["StrictHostKeyChecking=no", "PasswordAuthentication=no"],
      "path": "/home/work/koa_base/",
      "post-deploy": "npm install --production && pm2 startOrRestart process.json --env production"
    },
    "dev-pc": {
      "user": "work",
      "host": ["10.10.85.164"],
      "ref": "origin/master",
      "repo": "git@github.com/yunlaiwu/koa-pc.git",
      "ssh_options": ["StrictHostKeyChecking=no", "PasswordAuthentication=no"],
      "path": "/home/work/koa_pc/",
      "post-deploy": "cd ../../koa_base/source && sh deploy.sh pc && pm2 startOrRestart process.json --env production"
    }
  }
}
